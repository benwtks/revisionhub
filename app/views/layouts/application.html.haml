%html
  %head
    - if @title.blank?
      %title= "RevisionHub"
    - else
      %title= "RevisionHub: " + @title
    = stylesheet_link_tag    'application', media: 'all', 'data-turbolinks-track' => true
    = javascript_include_tag 'application', 'data-turbolinks-track' => true
    = csrf_meta_tags
    %meta{name: "viewport", content: "width=device-width, initial-scale=1.0"}
    %link{rel: "canonical", href: "http://www.revisionhub.uk"}
  %body
    - if @home
      - @page_wrapper = false

    - if @page_wrapper == nil
      - @page_wrapper = true

    - if @devise_page || @form
      - @single_section_page = true
      - @page_wrapper = false

    - if @page_wrapper || @devise_page || @form
      - @wrapper = true

    - if notice
      .notice-wrapper
        %p.notice= notice
    - elsif alert
      - @alert = true
      .alert-wrapper
        %p.alert= alert

    - unless @home
      %header
        = render 'nav-bar'

    - if @wrapper
      %div{class: [("devise-wrapper" if @devise_page), ("general-form-wrapper" if @form), ("page-wrapper" if @page_wrapper)]}
        - if @single_section_page
          .section-wrapper.animated{class: [("flipInX" if @devise_page unless @alert), ("wobble" if @devise_page && @alert)]}
            = yield
        - else
          = yield
    - else
      = yield
    = render 'analytics'
